import{_ as u}from"./ValaxyMain.vue_vue_type_style_index_0_lang.DChRKaSe.js";import{e as f,u as k,a as m}from"./chunks/vue-router.FmWApsIx.js";import{ab as b,ap as l,aj as e,af as s,ah as n,B as g,aa as E,D as _}from"./framework.DC7oaBGI.js";import"./app.Cv9KF2e9.js";import"./chunks/dayjs.BdcnXKr1.js";import"./chunks/vue-i18n.BOddLQ8M.js";import"./chunks/pinia.NKRLu0D4.js";import"./chunks/nprogress.CYC1D9qa.js";/* empty css                    */import"./chunks/@vueuse/motion.ByPWfQ4X.js";import"./YunComment.vue_vue_type_style_index_0_lang.Cf9c7xR6.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.CsL-9N-e.js";import"./post.CAyq-mN9.js";const y=f('/posts/"内网穿透简单教程"',async i=>JSON.parse('{"title":"内网穿透简单教程","description":"","frontmatter":{"title":"内网穿透简单教程","date":"2025-12-01 14:11:29","categories":["编程"],"email":"KijinSeija@shouw.blog","readmore":true,"tags":["技巧","网络","内网穿透"]},"headers":[],"relativePath":"pages/posts/\\"内网穿透简单教程\\".md","lastUpdated":1771399901000}'),{lazy:(i,r)=>i.name===r.name}),x={__name:'"内网穿透简单教程"',setup(i,{expose:r}){const{data:p}=y(),c=m(),d=k(),t=Object.assign(d.meta.frontmatter||{},p.value?.frontmatter||{});return c.currentRoute.value.data=p.value,_("valaxy:frontmatter",t),globalThis.$frontmatter=t,r({frontmatter:{title:"内网穿透简单教程",date:"2025-12-01 14:11:29",categories:["编程"],email:"KijinSeija@shouw.blog",readmore:!0,tags:["技巧","网络","内网穿透"]}}),(a,o)=>{const h=u;return E(),b(h,{frontmatter:g(t)},{"main-content-md":l(()=>[...o[0]||(o[0]=[s("h1",{id:"使用-docker-部署-frp-实现内网穿透",tabindex:"-1"},[n("使用 Docker 部署 frp 实现内网穿透 "),s("a",{class:"header-anchor",href:"#使用-docker-部署-frp-实现内网穿透","aria-label":'Permalink to "使用 Docker 部署 frp 实现内网穿透"'},"​")],-1),s("p",null,"frp（Fast Reverse Proxy）是一个高性能的反向代理应用，可帮助你将处于内网或防火墙后的设备（如个人电脑、树莓派等）暴露给公网。",-1),s("blockquote",null,[s("p",null,[s("strong",null,"提示："),n(" 大学生可以通过认证免费领取或以优惠价格购买阿里云、腾讯云等云服务商的轻量应用服务器或 ECS 服务器，非常适合作为本教程中的 frps 服务器端。请留意相关云服务商的校园计划。")])],-1),s("h2",{id:"核心原理",tabindex:"-1"},[n("核心原理 "),s("a",{class:"header-anchor",href:"#核心原理","aria-label":'Permalink to "核心原理"'},"​")],-1),s("p",null,[n("frp 依赖于一台拥有公网 IP 的服务器（"),s("strong",null,"frps 服务器"),n("）作为中转站。内网设备（"),s("strong",null,"frpc 客户端"),n("）通过隧道连接到这台服务器，frps 接收到公网请求后，通过隧道将其转发给 frpc，从而实现内网服务的暴露。")],-1),s("h2",{id:"一、部署-frps-服务器端-公网服务器",tabindex:"-1"},[n("一、部署 frps 服务器端 (公网服务器) "),s("a",{class:"header-anchor",href:"#一、部署-frps-服务器端-公网服务器","aria-label":'Permalink to "一、部署 frps 服务器端 (公网服务器)"'},"​")],-1),s("p",null,"frps 需要部署在你的公网服务器上（例如阿里云、腾讯云等）。",-1),s("h3",{id:"_1-创建配置文件-frps-ini",tabindex:"-1"},[n("1. 创建配置文件 "),s("code",null,"frps.ini"),n(),s("a",{class:"header-anchor",href:"#_1-创建配置文件-frps-ini","aria-label":'Permalink to "1. 创建配置文件 `frps.ini`"'},"​")],-1),s("p",null,[n("在你的服务器上创建一个目录（例如 "),s("code",null,"/opt/frp"),n("），并在其中创建 "),s("code",null,"frps.ini"),n(" 配置文件。")],-1),s("div",{class:"language-ini"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"ini"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# frps.ini")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[common]")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# frp 服务器与客户端通信的端口，这是 frpc 客户端需要连接的端口")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bind_addr"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = 0.0.0.0")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bind_port"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = 7000")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 客户端连接 frps 时需提供的密钥，请自行设置复杂密码")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"token"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = YOUR_SECURE_TOKEN_HERE ")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 对外提供服务的 HTTP/HTTPS 端口（可选，但推荐用于 Web 服务）")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"vhost_http_port"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = 80")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"vhost_https_port"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = 443 ")]),n(`
`),s("span",{class:"line"}),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 仪表盘端口（可选，用于监控 frp 状态，请确保防火墙仅对内网开放）")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"dashboard_port"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = 7500")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"dashboard_user"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = admin")]),n(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"dashboard_pwd"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = YOUR_DASHBOARD_PASSWORD")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("blockquote",null,[s("p",null,[s("strong",null,"重要："),n(" 确保你的公网服务器防火墙（包括云服务商的安全组和 Linux 系统的 firewalld/ufw）开放了 "),s("code",null,"bind_port"),n(" ("),s("code",null,"7000"),n(") 以及你希望暴露给公网的服务端口（如 "),s("code",null,"80"),n(", "),s("code",null,"443"),n(", "),s("code",null,"7500"),n("）。")])],-1),s("h3",{id:"_2-使用-docker-部署-frps",tabindex:"-1"},[n("2. 使用 Docker 部署 frps "),s("a",{class:"header-anchor",href:"#_2-使用-docker-部署-frps","aria-label":'Permalink to "2. 使用 Docker 部署 frps"'},"​")],-1),s("p",null,[n("使用 "),s("code",null,"snowdreamtech/frps"),n(" 镜像部署 frps（大陆网络环境下），并挂载配置文件和开放端口。")],-1),s("p",null,[s("strong",null,"Bash")],-1),s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"docker run -d \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    --name frps \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    --restart always \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    -v /opt/frp/frps.ini:/etc/frp/frps.ini \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    -p 7000:7000 \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    -p 80:80 \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    -p 443:443 \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    -p 7500:7500 \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    snowdreamtech/frps")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("h3",{id:"_3-检查-frps-运行状态",tabindex:"-1"},[n("3. 检查 frps 运行状态 "),s("a",{class:"header-anchor",href:"#_3-检查-frps-运行状态","aria-label":'Permalink to "3. 检查 frps 运行状态"'},"​")],-1),s("p",null,[n("执行以下命令确认 frps 是否正常运行。如果开启了仪表盘，你可以通过 "),s("code",null,"http://你的公网IP:7500"),n(" 访问。")],-1),s("p",null,[s("strong",null,"Bash")],-1),s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"docker logs frps")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("hr",null,null,-1),s("h2",{id:"二、部署-frpc-客户端-内网设备",tabindex:"-1"},[n("二、部署 frpc 客户端 (内网设备) "),s("a",{class:"header-anchor",href:"#二、部署-frpc-客户端-内网设备","aria-label":'Permalink to "二、部署 frpc 客户端 (内网设备)"'},"​")],-1),s("p",null,"frpc 需要部署在你希望进行内网穿透的设备上（例如本地电脑、开发机等）。",-1),s("h3",{id:"_1-创建配置文件-frpc-ini",tabindex:"-1"},[n("1. 创建配置文件 "),s("code",null,"frpc.ini"),n(),s("a",{class:"header-anchor",href:"#_1-创建配置文件-frpc-ini","aria-label":'Permalink to "1. 创建配置文件 `frpc.ini`"'},"​")],-1),s("p",null,[n("在内网设备上创建目录（例如 "),s("code",null,"/opt/frpc"),n("），并在其中创建 "),s("code",null,"frpc.ini"),n(" 配置文件。")],-1),s("p",null,[s("strong",null,"Ini")],-1),s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"# frpc.ini")]),n(`
`),s("span",{class:"line"},[s("span",null,"[common]")]),n(`
`),s("span",{class:"line"},[s("span",null,"# 你的 frps 服务器公网 IP 或域名")]),n(`
`),s("span",{class:"line"},[s("span",null,"server_addr = YOUR_SERVER_IP")]),n(`
`),s("span",{class:"line"},[s("span",null,"# frps 监听的 bind_port")]),n(`
`),s("span",{class:"line"},[s("span",null,"server_port = 7000")]),n(`
`),s("span",{class:"line"},[s("span",null,"# frps 配置的 token 密钥")]),n(`
`),s("span",{class:"line"},[s("span",null,"token = YOUR_SECURE_TOKEN_HERE")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"# [ssh] 示例：将内网设备的 22 端口映射到公网服务器的 6000 端口")]),n(`
`),s("span",{class:"line"},[s("span",null,"[ssh]")]),n(`
`),s("span",{class:"line"},[s("span",null,"type = tcp")]),n(`
`),s("span",{class:"line"},[s("span",null,"local_ip = 127.0.0.1")]),n(`
`),s("span",{class:"line"},[s("span",null,"local_port = 22")]),n(`
`),s("span",{class:"line"},[s("span",null,"remote_port = 6000")]),n(`
`),s("span",{class:"line"},[s("span")]),n(`
`),s("span",{class:"line"},[s("span",null,"# [web] 示例：将内网运行的 Web 服务 (本地 8080) 映射到公网 80 端口")]),n(`
`),s("span",{class:"line"},[s("span",null,"[web]")]),n(`
`),s("span",{class:"line"},[s("span",null,"type = http")]),n(`
`),s("span",{class:"line"},[s("span",null,"local_ip = 127.0.0.1")]),n(`
`),s("span",{class:"line"},[s("span",null,"local_port = 8080")]),n(`
`),s("span",{class:"line"},[s("span",null,"# 公网访问的域名或公网 IP")]),n(`
`),s("span",{class:"line"},[s("span",null,"subdomain = web # 如果 frps 使用了 vhost_http_port，则使用 subdomain")]),n(`
`),s("span",{class:"line"},[s("span",null,"# 或者直接使用 custom_domains = YourDomain.com")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("h3",{id:"_2-使用-docker-部署-frpc",tabindex:"-1"},[n("2. 使用 Docker 部署 frpc "),s("a",{class:"header-anchor",href:"#_2-使用-docker-部署-frpc","aria-label":'Permalink to "2. 使用 Docker 部署 frpc"'},"​")],-1),s("p",null,[n("使用 "),s("code",null,"snowdreamtech/frpc"),n(" 镜像部署 frpc，并挂载配置文件。")],-1),s("p",null,[s("strong",null,"Bash")],-1),s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"docker run -d \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    --name frpc \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    --network host \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    --restart always \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    -v /opt/frp/frpc.ini:/etc/frp/frpc.ini \\")]),n(`
`),s("span",{class:"line"},[s("span",null,"    snowdreamtech/frpc")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("blockquote",null,[s("p",null,[s("strong",null,[n("注意 "),s("code",null,"--network host"),n("：")]),n(" 客户端容器通常使用 "),s("code",null,"--network host"),n(" 模式，以便 frpc 能够直接访问内网主机的服务端口（如 "),s("code",null,"22"),n(" 或 "),s("code",null,"8080"),n("），从而实现准确的端口转发。")])],-1),s("h3",{id:"_3-检查-frpc-运行状态",tabindex:"-1"},[n("3. 检查 frpc 运行状态 "),s("a",{class:"header-anchor",href:"#_3-检查-frpc-运行状态","aria-label":'Permalink to "3. 检查 frpc 运行状态"'},"​")],-1),s("p",null,"执行以下命令确认 frpc 是否成功连接到 frps 服务器。",-1),s("p",null,[s("strong",null,"Bash")],-1),s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"docker logs frpc")])])]),s("button",{class:"code-block-unfold-btn"})],-1),s("h2",{id:"三、验证穿透效果",tabindex:"-1"},[n("三、验证穿透效果 "),s("a",{class:"header-anchor",href:"#三、验证穿透效果","aria-label":'Permalink to "三、验证穿透效果"'},"​")],-1),s("ol",null,[s("li",null,[s("strong",null,"SSH 服务验证："),n(" 尝试通过公网访问内网设备的 SSH 服务。 "),s("strong",null,"Bash"),s("code",null,"    ssh user@YOUR_SERVER_IP -p 6000    ")]),s("li",null,[s("strong",null,"Web 服务验证："),n(" 如果你配置了 "),s("code",null,"[web]"),n(" 代理，在浏览器中访问你绑定的域名或公网 IP，即可访问内网设备上 "),s("code",null,"8080"),n(" 端口运行的 Web 服务。")])],-1)])]),"main-header":l(()=>[e(a.$slots,"main-header")]),"main-header-after":l(()=>[e(a.$slots,"main-header-after")]),"main-nav":l(()=>[e(a.$slots,"main-nav")]),"main-content-before":l(()=>[e(a.$slots,"main-content-before")]),"main-content":l(()=>[e(a.$slots,"main-content")]),"main-content-after":l(()=>[e(a.$slots,"main-content-after")]),"main-nav-before":l(()=>[e(a.$slots,"main-nav-before")]),"main-nav-after":l(()=>[e(a.$slots,"main-nav-after")]),comment:l(()=>[e(a.$slots,"comment")]),footer:l(()=>[e(a.$slots,"footer")]),aside:l(()=>[e(a.$slots,"aside")]),"aside-custom":l(()=>[e(a.$slots,"aside-custom")]),default:l(()=>[e(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{x as default,y as usePageData};
